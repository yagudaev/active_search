<!DOCTYPE html>
<html lang="en">
<head>
    <title>ActiveRecord::SignedId</title>
    <meta charset="UTF-8" />

<link rel="stylesheet" href="/rdoc/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/rdoc/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/rdoc/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/rdoc/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/rdoc/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/rdoc/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/rdoc/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/rdoc/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/rdoc/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/rdoc/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/rdoc/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/rdoc/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script type="text/javascript" charset="utf-8">
document.addEventListener("turbolinks:load", function() {
  // Only initialize panel if not yet initialized
  if(!$('#panel .tree ul li').length) {
    $('#links').hide();
    var panel = new Searchdoc.Panel($('#panel'), search_data, tree, '/');
    $('#search').focus();
    var s = window.location.search.match(/\?q=([^&]+)/);
    if (s) {
      s = decodeURIComponent(s[1]).replace(/\+/g, ' ');
      if (s.length > 0) {
        $('#search').val(s);
        panel.search(s, true);
      }
    }
    panel.toggle(["ActiveRecord", "SignedId"]);
  }
})
</script>



    <meta property="og:title" value="ActiveRecord::SignedId">



    <meta name="description" content="Active Record Signed Id.">
    <meta property="og:description" content="Active Record Signed Id.">


    <meta name="keywords" content="ActiveRecord::SignedId class">

    <meta name="keywords" content="signed_id">

</head>

<body>

    <div class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" />
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="/rdoc/panel/links.html" id="links">index</a>
</div>


    <div class="banner">

            <span>Ruby on Rails 6.1.0.rc1</span><br />

        <h1>
            <span class="type">Module</span>
            ActiveRecord::SignedId

        </h1>
        <ul class="files">

            <li><a href="../../files/activerecord/lib/active_record/signed_id_rb.html">activerecord/lib/active_record/signed_id.rb</a></li>

        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">

    <div class="description">

<h1 id="module-ActiveRecord::SignedId-label-Active+Record+Signed+Id">Active Record Signed Id</h1>

    </div>











    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>

        <li>
          <span class="type">MODULE</span>
          <a href="SignedId/ClassMethods.html">ActiveRecord::SignedId::ClassMethods</a>
        </li>

    </ul>




    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">

        <dt>S</dt>
        <dd>
          <ul>


              <li>
                <a href="#method-i-signed_id">signed_id</a>
              </li>

          </ul>
        </dd>

    </dl>


















    <!-- Methods -->


      <div class="sectiontitle">Instance Public methods</div>

        <div class="method">
          <div class="title method-title" id="method-i-signed_id">

              <b>signed_id</b>(expires_in: nil, purpose: nil)

            <a href="../../classes/ActiveRecord/SignedId.html#method-i-signed_id" name="method-i-signed_id" class="permalink">Link</a>
          </div>


            <div class="description">
              <p>Returns a signed id that&#39;s generated using a preconfigured <code>ActiveSupport::MessageVerifier</code> instance. This signed id is tamper proof, so it&#39;s safe to send in an email or otherwise share with the outside world. It can further more be set to expire (the default is not to expire), and scoped down with a specific purpose. If the expiration date has been exceeded before <code>find_signed</code> is called, the id won&#39;t find the designated record. If a purpose is set, this too must match.</p>

<p>If you accidentally let a signed id out in the wild that you wish to retract sooner than its expiration date (or maybe you forgot to set an expiration date while meaning to!), you can use the purpose to essentially version the <a href="SignedId.html#method-i-signed_id"><code>signed_id</code></a>, like so:</p>

<pre><code>user.signed_id purpose: :v2
</code></pre>

<p>And you then change your <code>find_signed</code> calls to require this new purpose. Any old signed ids that were not created with the purpose will no longer find the record.</p>
            </div>








            <div class="sourcecode">

              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-signed_id_source')" id="l_method-i-signed_id_source">show</a>

                  | <a href="https://github.com/rails/rails/blob/3baf25e1192df36db99162884b5c115db04dd0a3/activerecord/lib/active_record/signed_id.rb#L112" target="_blank" class="github_url">on GitHub</a>

              </p>
              <div id="method-i-signed_id_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/signed_id.rb, line 112</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">signed_id</span>(<span class="ruby-value">expires_in:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">purpose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">signed_id_verifier</span>.<span class="ruby-identifier">generate</span> <span class="ruby-identifier">id</span>, <span class="ruby-value">expires_in:</span> <span class="ruby-identifier">expires_in</span>, <span class="ruby-value">purpose:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">combine_signed_id_purposes</span>(<span class="ruby-identifier">purpose</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>

          </div>




</div>

    </div>
  </body>
</html>
